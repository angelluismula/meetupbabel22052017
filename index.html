<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>DevOps como cultura; Dime como provisionas y te diré como eres</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<link href="https://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="images/fondos/portada.png" data-background-size="contain">

				</section>
				<section style="color:yellow" data-background-image="images/fondos/P8240117.JPG">
        	<h3 style="color:yellow">Sobre mi (Ángel Luis Mula)</h3>
					<ul>
					<li>18 años trabajando en el area de sistemas.</liS>
					<li>Trabajo en Babel</li>
					<li>Aficiones: Juegos de mesa y buceo.</li>
					<li<i class="fa fa-twitter" aria-hidden="true"></i>@angelluismula </li>
					<i class="fa fa-envelope" aria-hidden="true"></i>angelluis.mula@babel.es</li>
				</ul>
				</section>
				<section data-background-image="images/fondos/runner.jpg">
					<h3>Sobre mi (Juan Vicente Herrera)</h3>
					<ul>
					<li>12 años trabajando en el mundo de la tecnología.</li>
					<li>Trabajo en Logtrust</li>
					<li>Aficiones:Gamer y runner.</li>
					<li<i class="fa fa-twitter" aria-hidden="true"></i>@jvicenteherrera </li>
					<i class="fa fa-envelope" aria-hidden="true"></i>juan.vicente.herrera@gmail.com</li>
				</ul>
				</section>
				<section data-background-image="images/fondos/devops.png">
					<h3>¿Que es Devops?</h3>
					DevOps es una cultura
    		</section>
				<section data-background="#76608A">
					<h3>Hagamos un juego.</h3>
					<ul>
					<li>El reto es simple: Intenta comunicar lo que aparece en el cuaderno a tu vecino de al lado.</li>
					<li>Abre el cuaderno. Si tiene un texto haz un dibujo de lo que describe. Si hay un dibujo escribe una frase o palabra de lo que representa</li>
					<li>Cuando lo tengas, pasa el cuaderno de tal forma que solo se vea lo que has dibujado/escrito.</li>
					<li>¿Parece facil, no? Aumentemos la dificultad intentando que el cuaderno llegue hasta la ultima persona de la fila antes de que acabe el video.</li>
					</ul>
				</section>
				<section data-background="#76608A">
					<h3>Temporizador</h3>
					<video controls autoplay>
						<source data-src="videos/tempoacelerado.mp4" type="video/mp4" />
					</video>
				</section>
				<section data-background="#76608A">
        	<h3>Cultura:</h3>
					<ul>
					<li>No es un conjunto de herramientas</li>
					<li>No es <b>SOLO</b> una disciplina tecnica: Incluye a más equipos que a desarrollo y sistemas</li>
					<li>Es un conjunto de tecnicas y filosofias.</li>
					</ul>
				</section>
				<section data-background="#76608A">
        	<table>
						<tr><td><img src="images/jokes/devops01.jpg"></td><td><img src="images/jokes/devops02.jpg"></td><td><img src="images/jokes/devops03.jpg"></td></tr>
						<tr><td><img src="images/jokes/devops04.jpg"></td><td><img src="images/jokes/devops05.jpg"></td><td><img src="images/jokes/devops06.jpg"></td></tr>
					</table>
				</section>

				<section style="color:blue" data-background-image="images/fondos/99-sistema-como-todo.png">
				</section>
				<section style="color:blue" data-background-image="images/fondos/infcode.jpg">
        	<h3 style="color:blue">Infraestructura como codigo</h3>
					<h3 style="color:black">"Is the process of managing and provisioning computer data centers through machine-readable definition files, rather than physical hardware configuration or interactive configuration tools"</h3>
				</section>
				<section data-background="#FA6800">
        	<h3>Ventajas:</h3>
					Convierte nuestro flujo de aplicación en:
					<ul>
						<li>Versionable</li>
						<li>Auditable</li>
						<li>Repetible</li>
						<li>y un proceso colaborativo</li>
					</ul>
				</section>
				<section data-background="#FA6800">
					<h3>Conceptos claves:</h3>
				<ul>
					<li>La infraestructura no solo son maquinas virtuales</li>
					<li>Código heredado</li>
					<li>Seguridad</li>
					<li>Reproducible en cualquier proveedor</li>
				</ul>
				</section>
				<section data-background="#FA6800">
					<h3>Martin Fowler</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/martinfowler.jpg">
				</section>
				<section data-background="#FA6800">
        	<h3>El ciclo de vida de una aplicación.</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/esquemaclasico.png">
				</section>
				<section data-background="#FA6800">
					<h3>Paradigma 1: Pets Vs Cattle</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/pets_vs_cattle.png">
				</section>
				<section data-background="#FA6800">
					<h3>Paradigma 2: Snowflakes Vs Phoenix</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/snowflake-versus-phoenix.png">
				</section>
				<section data-background="#FA6800">
					<h3>Infraestructura inmutable</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/infrainmutable.png">
				</section>
				<section data-background="#FA6800">
					<h3>Stateless</h3>
				</section>
				<section data-background="#FA6800">
					<h3>Computación elástica (ahorro de pasta)</h3>
					<ul>
					<li>Economía de escala</li>
					<li>Elige bien el modelo de pago</li>
					<li>Ahorro de la gestión</li>
					<li>Operational costs vs Investment costs</li>
				</ul>
				</section>
				<section data-background="#FA6800">
					<h3>Resiliencia</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/pinocanario.JPG">
					<p class="fragment fade-in">En sistemas tecnológicos, capacidad de un sistema de soportar y recuperarse ante desastres y perturbaciones</p>
				</section>
				<section data-background="#FA6800">
        	<h3>Consejos</h3>
					<ul>
						<li>Los metadatos son tus amigos: tags everywhere!</li>
						<li>Usa software de control de versiones estilo git</li>
						<li>Automatiza todo. Crea workflows que validen tus definiciones</li>
					</ul>
				</section>
				<section data-background="#76608A">
        	<h3>Hablemos de herramientas</h3>
					<ul>
						<li>La mejor herramienta es la que te soluciona el problema.</li>
						<li>Depende tu tipo de infraestructura necesitaras una o un conjunto de ellas</li>
					</ul>
				</section>
				<section data-background="#76608A">
					<h3>Disclaimer</h3>
					<ul>
						<li>Herramientas opensource (posibilidad de licencia comercial).</li>
						<li>Amplia aceptación y buena documentación.</li>
						<li>Aprendizaje sencillo.</li>
						<li>Multiplataforma.</li>
						<li>Prima el modelo push.</li>
					</ul>

				</section>
				<section data-background-image="images/fondos/P8310579.jpg">
					<img  style="background:none; border:none; box-shadow:none;" src="images/logos/packer.jpg">
				</section>
				<section data-background="#27AE60">
					<h3>Workflow</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/packerworkflow.jpg">
				</section>
				<section data-background="#27AE60">
<table>
	<tr>
		<td>Builders</td>
		<td>Provisioners</td>
		<td>Post-Processors</td>
	</tr>
	<tr>
		<td valign="top">
			<ul>
				<li>Amazon EC2</li>
				<li>Azure</li>
				<li>DigitalOcean</li>
				<li>Docker</li>
				<li>Google Cloud</li>
				<li>Hyper-V</li>
				<li>OpenStack</li>
				<li>VirtualBox</li>
				<li>VMware</li>
				<li>... (más)</li>
				
			</ul>
		</td>
		<td valign="top">
			<ul>
				<li>Ansible </li>
				<li>Chef </li>
				<li>File</li>
				<li>PowerShell</li>
				<li>Puppet </li>
				<li>Shell</li>
				<li>Windows Shell</li>
				<li>... (más)</li>
			</ul>
		</td>
		<td valign="top">
			<ul>
				<li>Amazon Import</li>
				<li>Atlas</li>
				<li>Compress</li>
				<li>Docker Push</li>
				<li>Manifest</li>
				<li>Shell (Local)</li>
				<li>Vagrant</li>
				<li>vSphere</li>
				<li>... (más)</li>
			</ul>
		</td>
	</tr>
</table>
				</section>
				<section class="cover" data-background="#27AE60">
					<h3>Demo</h3>
					<video controls>
						<source data-src="videos/packerEditado.mp4" type="video/mp4" />
					</video>
					
  				</section>
				<section data-background-image="images/fondos/GOPR1317.JPG">
					<img style="background:none; border:none; box-shadow:none;" src="images/logos/terraform.png">
				</section>
				<section data-background="#27AE60">
					<h3>Estado deseado vs</h3>
				</section>
				<section data-background-image="images/fondos/naia.jpg">
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/logos/ansible.png">
				</section>
				<section data-background="#1BA1E2">
					<h3>CARACTERISTICAS</h3>
					<ul>
						<li>Idempotente</li>
						<li>Sencillo: YAML y jinja2</li>
						<li>Facil añadir metadata</li>
						<li>Gran cantidad de modulos y roles</li>
						<li>Multiplataforma</li>
						<li>No almacena estado</li>
					</ul>
				</section>
				<section data-background="#1BA1E2">
					<h3>Tareas, roles, playbook e inventario</h3>
					<ul>
						<li>Tarea: Unidad minima de ejecución. Define un estado deseado</li>
						<li>Rol: Conjunto <b>REUSABLE</b> de tareas que persiguen un proposito. Tiene una determinada estructura que le dota funcionalidad (variables, handlers, test, templates)</li>
						<li>Play: Lista de tareas y roles</b>
						<li>Playbook: Conjunto de plays</b>
						<li>inventario: Listado de grupos y maquinas, asi como el conjunto de variables que a aplicar segun su pertenencia. <b>Pueden ser dinamicos</b>.
					</ul>
				</section>
				<section data-background="#1BA1E2">
					<h3>Tarea</h3>
					<pre><code class="yml">
- name: add a consultant whose account you want to expire
  user:
    name: james18
    shell: /bin/zsh
    groups: developers
    expires: 1422403387
				</code></pre>
				</section>
				<section data-background="#1BA1E2">
					<h3>Rol</h3>
					<pre><code class="bash">
├── default
│   └── main.yml
├── handlers
│   └── main.yml
├── meta
│   └── main.yml
├── tasks
│   └── main.yml
├── templates
│   └── conf.j2
├── tests
│   ├── inventory
│   └── test.yml
└── vars
				</code></pre>
				</section>
				<section data-background="#1BA1E2">
					<h3>Demo</h3>
					<video controls>
						<source data-src="videos/ansibleEditado.mp4" type="video/mp4" />
					</video>e
					
  				</section>
				<section data-background="#1BA1E2">
					<h3>No solo herramientas de despliegue</h3>
					 Dado que podemos condicionar la ejecución de tareas/roles con variables y tags y limitar a que maquinas se aplican, podemos escribir nuestros playbooks y roles pensando en la operación...
					<ul>
						<li>Parar servicios</li>
						<li>Cambiar la configuración dinamicamente</li>
						<li>Sacar maquinas del balanceo cambiando su healthcheck</li>
						<li>etc...</li>
				</section>
				<section data-background="#1BA1E2">
					<h3>Push vs Pull</h3>
				</section>
				<section data-background-image="images/fondos/cenote.jpg">
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/logos/rundeck.png">
				</section>
				<section data-background="#85C162">
					<h3>Rundeck</h3>
					Job Scheduler and Runbook Automation
					<ul>
						<li>Centralización (evita errores por versiones)</li>
						<li>Auditoria</li>
						<li>Delegación de acciones mediante roles de usuario</li>
						<li>Creación y programación de tareas (cacheo de inventario)</li>
					</ul>
				</section>
				<section data-background-image="images/fondos/hierro.JPG">
					<h3>Nuevos retos en aplicaciones basadas en microservicios</h3>
				</section>
				<section data-background="#647687">
					<h3>Hardware / platform agnostic</h3>
					<ul>
						<li>Evitar vendor lock-in</li>
						<li>Separar configuración y codigo</li>
						<li>Capa de abstracción: docker, cloudfoundry, etc...</li>
						<li>Procurar usar estandar abiertos</li>
					</ul>
				</section>
				<section data-background="#647687">
					<h3>Serverless</h3>
					<ul>
						<li>Referentes: AWS Lambda / Azure functions</li>
						<li>¿La nueva evolución?</li>
						<li>¿Como mantenemos la propiedad y la independencia del proveedor?</li>
						<li>Ej: www.get-faas.com</li>
					</ul>
				</section>
				<section data-background="#647687">
					<h3>Service discovery</h3>
					Detección automatica de dispositivos y servicios en una red.
					<ul>
						<li>Mediante DNS</li>
						<li>BD KV: Zookeeper, Consul, etcd, swarm...</li>
					</ul>
				</section>
				<section data-background-image="images/fondos/puffins.jpg">
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/logos/Docker.png">
				</section>
				<section data-background="#A4C400">
					<h3>Contenedores Vs Maquinas virtuales</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/VM-Diagram.png">
				</section>
				<section data-background="#A4C400">
					<h3>Ventajas</h3>
					<ul>
						<li>Empaqueta aplicaciones no servidores completos</li>
						<li>Ligeros: Footprint y ocupación en disco (capas) bajos</li>
						<li>Seguridad: Superficie de ataque menor. Perfiles seguridad nivel kernel</li>
						<li>Autocontenidos: Empaquetado con las dependencias, transportable entre plataformas</li>
						<li>Modular: Podemos componer nuestra stack a medida</li>
						<li>Monitorización y logs centralizado (multiples backends)</li>
					</ul>
				</section>
				<section data-background="#A4C400">
					<h3>Herramientas nativas de docker</h3>
					<ul>
						<li><b>Dockerfile</b></li>
						<li><b>Compose</b></li>
						<li>Machine</li>
						<li>Swarm</li>
						<li><b>Linuxkit</b></li>
						<li><b>Infrakit</b></li>
				</section>
<section data-background="#A4C400">
					<h3>Dockerfile</h3>
				<pre><code class="Dockerfile">
FROM golang as builder
COPY . /code
WORKDIR /code
RUN CGO_ENABLED=0 GOOS=linux GOARCH=arm go build -a -installsuffix cgo http.go

FROM scratch
COPY --from=builder /code/http /http
EXPOSE 8080
CMD ["/http"]
				</code></pre>
			</section>
				<section data-background="#A4C400">
					<h3>Dockercompose.yml</h3>
				<pre><code class="Dockercomposefile">
version: "3"
services:
  db:
    image: postgres:9.4
    volumes:
      - db-data:/var/lib/postgresql/data
    networks:
      - backend
    deploy:
      placement:
        constraints: [node.role == manager]
  result:
    image: dockersamples/examplevotingapp_result:before
    ports:
      - 5001:80
    networks:
      - backend
    depends_on:
      - db
 ...
				</code></pre>
			</section>
				<section data-background="#A4C400">
					<h3>Swarm</h3>
					Orquestador y cluster nativo de Docker Inc.
					<ul>
						<li>Service discovery</li>
						<li>Routing Mesh</li>
						<li>Selfhealing</li>
						<li>Swarm mode incluido con cliente docker</li>
						<li>Permite mezclar nodos de diferentes arquitecturas y S.O</li>
					</ul>
				</section>			
			<section data-background="#A4C400">
				<h3>Linuxkit</h3>
				<pre><code class="yml">
kernel:
  image: "linuxkit/kernel:4.9.x"
  cmdline: "console=ttyS0 console=tty0 page_poison=1"
init:
  - linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
  - linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
  - linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
onboot:
  - name: dhcpcd
    image: "linuxkit/dhcpcd:cb96c09a33c166eca6530f166f0f79927c3e83b0"
    binds:
     - /var:/var
     - /tmp/etc:/etc
    capabilities:
     - CAP_NET_ADMIN
 ...
    command: ["/sbin/dhcpcd", "--nobackground", "-f", "/dhcpcd.conf", "-1"]
...
outputs:
  - format: kernel+initrd
			</code></pre>
			</section>
			
				<section data-background="#A4C400">
					<h3>Infrakit</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/infrakit.png">
				</section>
				<section data-background-image="images/fondos/gcanaria.JPG">
					<h3>Nuevos retos</h3>
				</section>
				<section data-background="#F472D0">
				<h3>En operación:</h3>
				<ul>
					<li>Automatizar todo</li>
					<li>Mecanismos que permitan tomar decisiones agiles</li>
					<li>Autodocumentación</li>
					<li>Pruebas continuas (Chaos monkey)</li>
					<li>Auditar</li>
				</ul>
			</section>
				<section data-background="#F472D0">
					<h3>En monitorización: </h3>
					<ul>
						<li>Medir el servicio no solo los procesos</li>
						<li>Los logs son utiles para todos los despartamentos</li>
						<li>Metricas</li>
						<li>Usos avanzados: Detección de anomalías, traceo de la operación de principio a fin (opentrace o similar)</li>
					</ul>
				</section>
				<section data-background="#F472D0">
					<h3>Despliegues: Canary y blue-green</h3>
					<img class="stretch" style="background:none; border:none; box-shadow:none;" src="images/canary-bluegreen.png">
				</section>
				<section data-background="#F472D0">
					<h3>Adaptabilidad y automatismos:</h3>
					<ul>
						<li>Selfhealing</li>
						<li>Auto escalado</li>
						<li>Diseño orientado a servicio (Netflix)</li>
					</ul>
				</section>
				<section data-background="#F472D0">
					<h2>¿Preguntas?</h2>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				center: false,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
